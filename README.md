# üîç C++ Search Server

–ü–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ –Ω–∞ C++ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å—Ç–∞—Ç—É—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, TF-IDF —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ —É—á—ë—Ç–æ–º —Å—Ç–æ–ø-—Å–ª–æ–≤.

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–°–±–æ—Ä–∫–∞](#—Å–±–æ—Ä–∫–∞)
- [–ü–æ–≤–µ–¥–µ–Ω–∏–µ main.cpp](#–ø–æ–≤–µ–¥–µ–Ω–∏–µ-maincpp)
- [–ú–µ—Ç–æ–¥—ã SearchServer](#–º–µ—Ç–æ–¥—ã-searchserver)
- [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- –ü–æ–∏—Å–∫ —Å —É—á—ë—Ç–æ–º –º–∏–Ω—É—Å-—Å–ª–æ–≤ –∏ —Å—Ç–æ–ø-—Å–ª–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
- –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ TF-IDF + —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
- –£—á—ë—Ç ¬´–ø—É—Å—Ç—ã—Ö¬ª –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ RequestQueue
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `main.cpp` | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ |
| `search_server.h` | –ö–ª–∞—Å—Å `SearchServer` |
| `document.h` | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `Document`, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ `DocumentStatus` |
| `request_queue.h` | –û—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ–¥—Å—á—ë—Ç –Ω–µ—É–¥–∞—á–Ω—ã—Ö |
| `paginator.h` | –ü–∞–≥–∏–Ω–∞—Ü–∏—è (`Paginator`, `IteratorRange`) |
| `read_input_functions.h` | –í–≤–æ–¥ —Å—Ç—Ä–æ–∫–∏/—á–∏—Å–ª–∞ |
| `string_processing.h` | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å–ª–æ–≤–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫ |

---

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```cpp
#include "search_server.h"

SearchServer server("and in at"s);
server.AddDocument(1, "big dog and fancy collar"s, DocumentStatus::ACTUAL, {8, 3, 7});
server.AddDocument(2, "fluffy cat with long tail"s, DocumentStatus::ACTUAL, {5, 5, 5});

for (const auto& doc : server.FindTopDocuments("cat -dog")) {
    std::cout << doc.id << ": " << doc.relevance << " (" << doc.rating << ")" << std::endl;
}
```

---

## –°–±–æ—Ä–∫–∞

–¢—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++17 (g++ ‚â• 9, clang++ ‚â• 10, MSVC 2019+):

```bash
g++ -std=c++17 -o search_server main.cpp
./search_server
```

---

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ `main.cpp`

- –°–æ–∑–¥–∞—ë—Ç `SearchServer` —Å–æ —Å—Ç–æ–ø-—Å–ª–æ–≤–∞–º–∏
- –î–æ–±–∞–≤–ª—è–µ—Ç 5 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –í—ã–ø–æ–ª–Ω—è–µ—Ç 1440+ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ `RequestQueue`, —á–∞—Å—Ç—å –∏–∑ –Ω–∏—Ö –ø—É—Å—Ç—ã–µ
- –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç —á–∏—Å–ª–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç: `Total empty requests: 1437`)

---

## –ú–µ—Ç–æ–¥—ã `SearchServer`

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `explicit SearchServer(const StringContainer& stop_words)` | –°–æ–∑–¥–∞—ë—Ç —Å–µ—Ä–≤–µ—Ä —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ —Å—Ç–æ–ø-—Å–ª–æ–≤–∞–º–∏ |
| `void AddDocument(int id, const std::string& text, DocumentStatus status, const std::vector<int>& ratings)` | –î–æ–±–∞–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç |
| `FindTopDocuments(query)` | –ü–æ–∏—Å–∫ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ |
| `FindTopDocuments(query, status)` | –ü–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç–∞—Ç—É—Å—É |
| `FindTopDocuments(query, predicate)` | –ü–æ–∏—Å–∫ —Å –ø—Ä–µ–¥–∏–∫–∞—Ç–æ–º |
| `MatchDocument(query, doc_id)` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–≤–ø–∞–≤—à–∏–µ –ø–ª—é—Å-—Å–ª–æ–≤–∞ –∏ —Å—Ç–∞—Ç—É—Å |
| `GetDocumentCount()` | –ö–æ–ª-–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
| `GetDocumentId(index)` | ID –ø–æ –∏–Ω–¥–µ–∫—Å—É |

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **`RequestQueue`**
  - –•—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã 1440 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  - `GetNoResultRequests()` ‚Äî —Å–∫–æ–ª—å–∫–æ –∏–∑ –Ω–∏—Ö –Ω–µ –¥–∞–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

- **`Paginator`**
  - –î–µ–ª–∏—Ç –ª—é–±–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `vector<Document>`) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  - –£–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ—Ä—Ü–∏—è–º–∏

- **`string_processing.h`**
  - `SplitIntoWords(text)` ‚Äî —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –Ω–∞ —Å–ª–æ–≤–∞
  - `MakeUniqueNonEmptyStrings(container)` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏ —Å–æ–∑–¥–∞—ë—Ç `set<string>`

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- C++17
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä: GCC, Clang, MSVC
- –ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

---

> –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö: —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é/–ø–æ–∏—Å–∫ —Å —Ö–æ—Ä–æ—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.